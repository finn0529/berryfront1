(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"2ab2":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"row",staticStyle:{padding:"50px","padding-top":"150px"}},[s("div",{staticClass:"col"},[s("q-table",{ref:"table",staticStyle:{background:"none","box-shadow":"none"},attrs:{title:"我的訂單",data:e.orders,columns:e.columns,"row-key":"name","selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected,pagination:e.pagination},on:{selection:e.onSelection,"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){return[s("q-tr",[s("q-td",{staticClass:"text-center"},[s("q-checkbox",{attrs:{dense:""},model:{value:t.selected,callback:function(s){e.$set(t,"selected",s)},expression:"props.selected"}})],1),s("q-td",{staticClass:"text-center"},[s("router-link",{attrs:{to:"/order/"+t.row._id}},[e._v(e._s(t.row._id))])],1),s("q-td",{staticClass:"text-center"},[e._v(e._s(t.row.date))]),s("q-td",{staticClass:"text-center"},[t.row.pay?s("p",[e._v("已付款")]):s("p",[e._v("未付款")])]),s("q-td",{staticClass:"text-center"},[t.row.ship?s("p",[e._v("已出貨")]):s("p",[e._v("未出貨")])]),s("q-td",{staticClass:"text-center"},[e._v("NT$ "+e._s(e.total(t.row)))])],1)]}}])})],1)])])},n=[],l={data(){return{pagination:{rowsPerPage:100},selected:[],lastIndex:null,columns:[{name:"orderNumber",align:"center",label:"訂單編號",sortable:!0},{name:"date",align:"center",label:"訂單日期",sortable:!0},{name:"payState",align:"center",label:"付款狀態",sortable:!0},{name:"shipState",align:"center",label:"出貨狀態",sortable:!0},{name:"total",align:"center",label:"總金額",sortable:!0}],orders:[]}},methods:{total(e){return e.products.reduce(((e,t)=>e+t.quantity*t.product.price),0)},getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} record${this.selected.length>1?"s":""} selected of ${this.data.length}`},onSelection({rows:e,added:t,evt:s}){if(0===e.length||0===this.$refs.table)return;const a=e[0],n=this.$refs.table.filteredSortedRows,l=n.indexOf(a),r=this.lastIndex;if(this.lastIndex=l,document.getSelection().removeAllRanges(),!0===this.$q.platform.is.mobile)s={ctrlKey:!0};else if(s!==Object(s)||!0!==s.shiftKey&&!0!==s.ctrlKey)return void(this.selected=!0===t?e:[]);const i=!0===t?e=>{const t=this.selected.indexOf(e);-1===t&&(this.selected=this.selected.concat(e))}:e=>{const t=this.selected.indexOf(e);t>-1&&(this.selected=this.selected.slice(0,t).concat(this.selected.slice(t+1)))};if(null===r||!0!==s.shiftKey)return void i(a);const o=r<l?r:l,c=r<l?l:r;for(let d=o;d<=c;d+=1)i(n[d])}},async created(){try{const{data:e}=await this.api.get("/orders/me",{headers:{authorization:"Bearer "+this.user.token}});this.orders=e.result}catch(e){this.$q.notify({message:e.response.data.message,type:"negative"})}}},r=l,i=s("2877"),o=s("9989"),c=s("eaac"),d=s("bd08"),h=s("db86"),p=s("8f8e"),u=s("eebe"),b=s.n(u),g=Object(i["a"])(r,a,n,!1,null,null,null);t["default"]=g.exports;b()(g,"components",{QPage:o["a"],QTable:c["a"],QTr:d["a"],QTd:h["a"],QCheckbox:p["a"]})}}]);