(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"356b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"q-pa-md"},[s("q-table",{ref:"table",attrs:{title:"Treats",data:e.orders,columns:e.columns,"row-key":"name","selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected,pagination:e.pagination},on:{selection:e.onSelection,"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"body",fn:function(t){return[s("q-tr",[s("q-td",{staticClass:"text-center"},[s("q-checkbox",{attrs:{dense:""},model:{value:t.selected,callback:function(s){e.$set(t,"selected",s)},expression:"props.selected"}})],1),s("q-td",{staticClass:"text-center"},[s("router-link",{attrs:{to:"/admin/order/"+t.row._id}},[e._v(e._s(t.row._id))])],1),s("q-td",{staticClass:"text-center"},[e._v(e._s(t.row.date))]),s("q-td",{staticClass:"text-center"},[e._v(e._s(t.row.userInfo.name))]),s("q-td",{staticClass:"text-center"},[t.row.pay?s("p",[e._v("已付款")]):s("p",[e._v("未付款")])]),s("q-td",{staticClass:"text-center"},[t.row.ship?s("p",[e._v("已出貨")]):s("p",[e._v("未出貨")])]),s("q-td",{staticClass:"text-center"},[e._v("NT$ "+e._s(e.total(t.row)))])],1)]}}])})],1)])},l=[],n={data(){return{pagination:{rowsPerPage:100},selected:[],lastIndex:null,columns:[{name:"orderNumber",align:"center",label:"訂單編號",sortable:!0},{name:"date",align:"center",label:"訂單日期",sortable:!0},{name:"customer",align:"center",label:"購買人",sortable:!0},{name:"payState",align:"center",label:"付款狀態",sortable:!0},{name:"shipState",align:"center",label:"出貨狀態",sortable:!0},{name:"total",align:"center",label:"總金額",sortable:!0}],orders:[]}},methods:{total(e){return e.products.reduce(((e,t)=>e+t.quantity*t.product.price),0)},getSelectedString(){return 0===this.selected.length?"":`${this.selected.length} record${this.selected.length>1?"s":""} selected of ${this.data.length}`},onSelection({rows:e,added:t,evt:s}){if(0===e.length||0===this.$refs.table)return;const a=e[0],l=this.$refs.table.filteredSortedRows,n=l.indexOf(a),r=this.lastIndex;if(this.lastIndex=n,document.getSelection().removeAllRanges(),!0===this.$q.platform.is.mobile)s={ctrlKey:!0};else if(s!==Object(s)||!0!==s.shiftKey&&!0!==s.ctrlKey)return void(this.selected=!0===t?e:[]);const c=!0===t?e=>{const t=this.selected.indexOf(e);-1===t&&(this.selected=this.selected.concat(e))}:e=>{const t=this.selected.indexOf(e);t>-1&&(this.selected=this.selected.slice(0,t).concat(this.selected.slice(t+1)))};if(null===r||!0!==s.shiftKey)return void c(a);const i=r<n?r:n,o=r<n?n:r;for(let d=i;d<=o;d+=1)c(l[d])}},async created(){try{const{data:e}=await this.api.get("/orders/all",{headers:{authorization:"Bearer "+this.user.token}});this.orders=e.result}catch(e){this.$q.notify({message:e.response.data.message,type:"negative"})}}},r=n,c=s("2877"),i=s("9989"),o=s("eaac"),d=s("bd08"),u=s("db86"),h=s("8f8e"),p=s("eebe"),b=s.n(p),g=Object(c["a"])(r,a,l,!1,null,null,null);t["default"]=g.exports;b()(g,"components",{QPage:i["a"],QTable:o["a"],QTr:d["a"],QTd:u["a"],QCheckbox:h["a"]})}}]);