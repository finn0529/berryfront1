(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"17a4":function(t,e,a){},b445:function(t,e,a){"use strict";a("17a4")},f68e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"row",staticStyle:{padding:"50px","padding-top":"80px","padding-bottom":"100px"}},[a("div",{staticClass:"col"},[a("h4",[t._v("購物車")]),t.products.length>0?a("div",{staticClass:"cartTable",staticStyle:{position:"relative"}},[a("q-table",{staticStyle:{background:"none","box-shadow":"none"},attrs:{data:t.products,columns:t.columns,"row-key":"name","hide-bottom":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",[a("q-td",{staticClass:"text-center"},[e.row.product.image?a("img",{staticStyle:{height:"100px"},attrs:{src:e.row.product.image}}):t._e()]),a("q-td",{staticClass:"text-center"},[t._v(t._s(e.row.product.name))]),a("q-td",{staticClass:"text-center"},[t._v("NT$ "+t._s(e.row.product.price))]),a("q-td",[a("q-input",{staticClass:"quantity",staticStyle:{width:"65px"},attrs:{outlined:"",color:"black","bg-color":"white",type:"number",min:"1"},on:{input:function(a){return t.updateCart(e.pageIndex,e.row.quantity)}},model:{value:e.row.quantity,callback:function(a){t.$set(e.row,"quantity",a)},expression:"props.row.quantity"}})],1),a("q-td",{staticClass:"text-center"},[a("q-btn",{attrs:{flat:""},on:{click:function(a){return t.updateCart(e.pageIndex,0)}}},[t._v("X")])],1)],1)]}}],null,!1,2633776955)}),a("p",{staticClass:"text-right",staticStyle:{"font-size":"20px"}},[t._v("總金額 NT$ "+t._s(t.total))]),a("q-btn",{staticStyle:{right:"0",position:"absolute"},attrs:{unelevated:"",rounded:"",color:"light-green-4",size:"lg",to:"/check"}},[t._v("前往結帳")])],1):a("p",[t._v("購物車是空的喔！"),a("q-btn",{attrs:{flat:"",to:"/product"}},[t._v("立即前往購物")])],1)])])])},s=[],i={data(){return{pagination:{rowsPerPage:100},products:[],columns:[{name:"image",label:"圖片",align:"center"},{name:"pname",label:"商品名稱",align:"center"},{name:"price",label:"價格",align:"center"},{name:"quantity",label:"數量",align:"center"},{name:"delete",label:"刪除",align:"center"}]}},methods:{async updateCart(t,e){try{await this.api.patch("/users/me/cart",{product:this.products[t].product._id,quantity:e},{headers:{authorization:"Bearer "+this.user.token}}),0===e&&(this.products.splice(t,1),this.$store.commit("user/updateCart",this.user.cart-1))}catch(a){this.$q.notify({message:a.response.data.message,type:"negative"})}}},computed:{total(){return this.products.reduce(((t,e)=>t+e.quantity*e.product.price),0)}},async created(){try{const{data:t}=await this.api.get("/users/me/cart",{headers:{authorization:"Bearer "+this.user.token}});this.products=t.result,console.log(this.products)}catch(t){this.$q.notify({message:t.response.data.message,type:"negative"})}}},r=i,o=(a("b445"),a("2877")),c=a("9989"),u=a("eaac"),l=a("bd08"),p=a("db86"),d=a("27f9"),g=a("9c40"),h=a("eebe"),m=a.n(h),b=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=b.exports;m()(b,"components",{QPage:c["a"],QTable:u["a"],QTr:l["a"],QTd:p["a"],QInput:d["a"],QBtn:g["a"]})}}]);