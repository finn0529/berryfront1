(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"33ae":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-page",[s("div",{staticClass:"row",staticStyle:{padding:"50px","padding-top":"80px","padding-bottom":"100px"}},[s("div",{staticClass:"col-12 col-md-6"},[s("h4",[t._v("寄送資訊")]),s("q-form",{staticClass:"q-pa-md q-gutter-sm",on:{submit:function(e){return e.preventDefault(),t.submitProduct.apply(null,arguments)}}},[s("q-input",{attrs:{outlined:"",color:"black","bg-color":"white",label:"姓名",rules:[function(t){return t.length>0||"名字必填"}]},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}}),s("q-input",{attrs:{outlined:"",color:"black","bg-color":"white",label:"電話",rules:[function(t){return 10==t.length||"電話格式不正確"}]},model:{value:t.userInfo.phone,callback:function(e){t.$set(t.userInfo,"phone",e)},expression:"userInfo.phone"}}),s("twzipcode-county",{staticClass:"twzipcode",attrs:{id:"twzipcode__county"},model:{value:t.userInfo.county,callback:function(e){t.$set(t.userInfo,"county",e)},expression:"userInfo.county"}}),s("twzipcode-zipcode",{staticClass:"twzipcode",attrs:{id:"twzipcode__zipcode","text-template":":city","filter-by-county":t.userInfo.county},model:{value:t.userInfo.zipcode,callback:function(e){t.$set(t.userInfo,"zipcode",e)},expression:"userInfo.zipcode"}}),s("q-input",{attrs:{outlined:"",color:"black","bg-color":"white",label:"寄送地址",rules:[function(t){return t.length>0||"地址必填"}]},model:{value:t.userInfo.address,callback:function(e){t.$set(t.userInfo,"address",e)},expression:"userInfo.address"}})],1)],1),s("div",{staticClass:"col-12 col-md-6",staticStyle:{position:"relative"}},[s("h4",[t._v("商品資訊")]),s("q-table",{attrs:{data:t.products,columns:t.columns,"row-key":"name","hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[s("q-tr",[s("q-td",{staticClass:"text-center"},[e.row.product.image?s("img",{staticStyle:{height:"100px"},attrs:{src:e.row.product.image}}):t._e()]),s("q-td",{staticClass:"text-center"},[t._v(t._s(e.row.product.name))]),s("q-td",{staticClass:"text-center"},[t._v("NT$ "+t._s(e.row.product.price))]),s("q-td",{staticClass:"text-center"},[t._v("數量:"+t._s(e.row.quantity))])],1)]}}])}),s("p",{staticClass:"text-right",staticStyle:{"font-size":"20px"}},[t._v("總金額 NT$ "+t._s(t.total))]),s("q-btn",{staticStyle:{right:"0",position:"absolute"},attrs:{unelevated:"",rounded:"",color:"light-green-4",size:"lg"},on:{click:t.checkOut}},[t._v("結帳")])],1)])])},a=[],n=s("f90c"),c=s.n(n),r=s("95af"),i=s("4244"),l=s.n(i),u={data(){return{products:[],columns:[{name:"image",label:"圖片",align:"center"},{name:"pname",label:"商品名稱",align:"center"},{name:"price",label:"價格",align:"center"},{name:"quantity",label:"數量",align:"center"}],userInfo:{name:"",phone:"",county:"臺北市",zipcode:"",address:""},validator:c.a,twzipcode:l.a}},computed:{total(){return this.products.reduce(((t,e)=>t+e.quantity*e.product.price),0)}},components:{TwzipcodeZipcode:r["b"],TwzipcodeCounty:r["a"]},methods:{async checkOut(){try{await this.api.post("/orders",this.userInfo,{headers:{authorization:"Bearer "+this.user.token}}),this.$q.notify({message:"結帳成功！",type:"positive"}),this.$router.push("/")}catch(t){this.$q.notify({message:t.response.data.message,type:"negative"})}}},async created(){try{const{data:t}=await this.api.get("/users/me/cart",{headers:{authorization:"Bearer "+this.user.token}});this.products=t.result,console.log(this.products)}catch(t){this.$q.notify({message:t.response.data.message,type:"negative"})}}},d=u,p=(s("9e2f"),s("2877")),f=s("9989"),m=s("0378"),h=s("27f9"),b=s("eaac"),g=s("bd08"),y=s("db86"),w=s("9c40"),v=s("eebe"),q=s.n(v),z=Object(p["a"])(d,o,a,!1,null,null,null);e["default"]=z.exports;q()(z,"components",{QPage:f["a"],QForm:m["a"],QInput:h["a"],QTable:b["a"],QTr:g["a"],QTd:y["a"],QBtn:w["a"]})},"9e2f":function(t,e,s){"use strict";s("d0cb")},d0cb:function(t,e,s){}}]);